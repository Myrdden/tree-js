<head>

</head>
<body>
  <p id='output'></p>
  <form id='insert-form' onsubmit='return doInsert(event)'>
    <input type='text' name='num'></input>
    <input type='submit'></input>
  </form>
  <script>
    const newTree = init => {return {data: init, left: null, right: null}};
    const treeInsert = (data, tree, compare = null) => {
      if (tree === null) { return {data: data, left: null, right: null}; }
      let usingCompare = compare || ((a,b) => a < b ? -1 : (a > b ? 1 : 0));
      if (usingCompare(data, tree.data) === -1) {
        if (tree.left === null) { tree.left = {data: data, left: null, right: null}; return tree; }
        else { return treeInsert(data, tree.left, compare); }
      } else if (usingCompare(data, tree.data) === 1) {
        if (tree.right === null) { tree.right = {data: data, left: null, right: null}; return tree; }
        else { return treeInsert(data, tree.right, compare); }
      } else { return tree }
    };
    const treeToAry = tree => {
      if (tree === null) { return []; }
      return [...treeToAry(tree.left), tree.data, ...treeToAry(tree.right)];
    };

    let tree = newTree(0);
    const showTree = () => {
      let p = document.getElementById('output');
      console.log(tree);
      p.innerHTML = treeToAry(tree);
    };

    const doInsert = event => {
      event.preventDefault();
      let form = new FormData(event.target);
      let num = form.get('num');
      treeInsert(parseInt(num), tree);
      showTree();
    };
    showTree();
  </script>
</body>
